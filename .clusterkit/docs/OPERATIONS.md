# ClusterKit Operations Guide

**Generated:** 2025-11-04T01:53:57Z

## Daily Operations

### Deploying Applications

#### Create a New Service

```bash
clusterkit create myapp \
  --image=gcr.io/baldmaninc/myapp:latest \
  --min-scale=0 \
  --max-scale=10
```



#### Update an Existing Service

```bash
clusterkit create myapp \
  --image=gcr.io/baldmaninc/myapp:v2 \
  --env=KEY=value
```



#### Delete a Service

```bash
clusterkit delete myapp
```



### Monitoring

#### Check Service Status

```bash
clusterkit status myapp
```



#### View Logs

```bash
# Real-time logs
clusterkit logs myapp --follow

# Last 100 lines
clusterkit logs myapp --tail=100
```



#### Check All Services

```bash
kubectl get ksvc --all-namespaces
```



### Database Management

#### Create a Database

```bash
clusterkit db create mydb \
  --database=postgres \
  --size=small
```



#### Get Database Connection Info

```bash
clusterkit db info mydb
```



#### Delete a Database

```bash
clusterkit db delete mydb
```



### Domain Management

#### Add a Custom Domain

```bash
clusterkit domain add myapp.torale.ai
```



#### List Domains

```bash
clusterkit domain list
```



#### Remove a Domain

```bash
clusterkit domain remove myapp.torale.ai
```



## Maintenance Tasks

### Update Components

#### Update Knative

```bash
kubectl apply -f https://github.com/knative/serving/releases/latest/download/serving-crds.yaml
kubectl apply -f https://github.com/knative/serving/releases/latest/download/serving-core.yaml
```



#### Update cert-manager

```bash
kubectl apply -f https://github.com/cert-manager/cert-manager/releases/latest/download/cert-manager.yaml
```



### Backup and Restore

#### Backup Cluster Configuration

```bash
# Backup all Knative services
kubectl get ksvc --all-namespaces -o yaml > knative-services-backup.yaml

# Backup all ingresses
kubectl get ingress --all-namespaces -o yaml > ingress-backup.yaml

# Backup cert-manager certificates
kubectl get certificates --all-namespaces -o yaml > certificates-backup.yaml
```



#### Restore from Backup

```bash
kubectl apply -f knative-services-backup.yaml
kubectl apply -f ingress-backup.yaml
```



### Scaling Operations

#### Scale a Service

```bash
# Scale manually
kubectl scale ksvc myapp --replicas=5 -n default

# Or update via clusterkit
clusterkit create myapp --min-scale=2 --max-scale=20
```



#### Check Resource Usage

```bash
# Node resource usage
kubectl top nodes

# Pod resource usage
kubectl top pods --all-namespaces
```



## Security Operations

### Update Secrets

#### Update Cloudflare Token

```bash
kubectl create secret generic cloudflare-api-token \
  --from-literal=api-token=NEW_TOKEN \
  --dry-run=client -o yaml | kubectl apply -f -
```



#### Rotate TLS Certificates

Certificates are automatically renewed by cert-manager. To force renewal:

```bash
kubectl delete certificate myapp-tls -n default
# cert-manager will automatically recreate it
```



### Access Control

#### Grant User Access to Cluster

```bash
gcloud projects add-iam-policy-binding baldmaninc \
  --member=user:user@example.com \
  --role=roles/container.developer
```



## Cost Optimization

### Identify Idle Resources

```bash
# Find services with min-scale > 0
kubectl get ksvc --all-namespaces -o json | \
  jq '.items[] | select(.spec.template.metadata.annotations."autoscaling.knative.dev/minScale" != "0")'
```



### Review GCP Costs

```bash
gcloud billing accounts list
gcloud billing projects describe baldmaninc
```



---
Generated by ClusterKit Bootstrap
